<!doctype html>
<html lang="de">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>ZEEWOLF - Campaign Builder & 3D Editor</title>
      <script type="module">
(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function l(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(a){if(a.ep)return;a.ep=!0;const n=l(a);fetch(a.href,n)}})();const $=(t="Mission Alpha")=>{const l=[];for(let i=0;i<=100;i++){l[i]=[];for(let a=0;a<=100;a++)l[i][a]=-1}return{headline:t,briefing:"Befehle f√ºr diese Mission hier eintragen...",gridSize:100,terrain:l,padX:10,padY:10,carrierX:-1,carrierY:-1,carrierAngle:0,carrierPath:"static",carrierSpeed:0,carrierRadius:40,lighthouseX:-1,lighthouseY:-1,spawnPoint:"pad",goalPersons:5,goalCrates:0,rain:!1,night:!1,windDir:45,windStr:1,windVar:!1}},e={type:"",campaign:[$()],curIdx:0,zoom:1,panX:0,panY:0,prevZoom:1,prevPanX:0,prevPanY:0,currentTool:"terrain",brushRadius:1.5,isCustomBrush:!1,selectedUI:null,isDrawing:!1,isEditorDragging:!1,isPrevDragging:!1,lastMX:0,lastMY:0},w=()=>e.campaign[e.curIdx],g={water:"#004488",waterNight:"#001433",bgNight:"#000408",bgRain:"#001122",padStroke:"#5f5",padFill:"rgba(0, 255, 0, 0.4)",padNight:"#2a2",carrierBase:"#888",carrierNight:"#333",carrierAccent:"red",carrierPath:"orange",lighthouseBase:"#d22",lighthouseLight:"#fff",uiHighlight:"#ffcc00",windActive:"cyan",textLight:"#fff",textDark:"#000",shadow:"rgba(0, 0, 0, 0.5)"},C=(t,r)=>{let l=50+t*20,i=150+t*10,a=50;return r&&(l=Math.floor(l*.3),i=Math.floor(i*.4),a=Math.floor(a*.6)),`rgb(${l}, ${i}, ${a})`},G=document.getElementById("editorCanvas"),o=G.getContext("2d"),V=document.getElementById("previewCanvas"),y=V.getContext("2d"),_=()=>{const t=w();if(!t)return;o.clearRect(0,0,600,600);const r=600/t.gridSize*e.zoom,l=document.getElementById("ui_pad"),i=document.getElementById("ui_carrier"),a=document.getElementById("ui_wind");l&&(l.style.display="none"),i&&(i.style.display="none"),a&&(a.style.display="none");for(let c=Math.floor(e.panX);c<Math.min(t.gridSize,e.panX+600/r+1);c++)for(let d=Math.floor(e.panY);d<Math.min(t.gridSize,e.panY+600/r+1);d++){const p=t.terrain[c][d];o.fillStyle=p<=0?g.water:C(p,!1),o.fillRect((c-e.panX)*r,(d-e.panY)*r,r+1.5,r+1.5)}if(t.padX>=0){const c=(t.padX-e.panX)*r,d=(t.padY-e.panY)*r;if(e.selectedUI==="pad"&&(o.shadowBlur=10,o.shadowColor=g.padStroke),o.fillStyle=g.padFill,o.fillRect(c,d,8*r,8*r),o.strokeStyle=g.padStroke,o.strokeRect(c,d,8*r,8*r),o.fillStyle=g.textLight,o.beginPath(),o.arc(c+4*r,d+4*r,Math.max(4,r/2),0,Math.PI*2),o.fill(),o.shadowBlur=0,t.spawnPoint==="pad"&&(o.fillStyle=g.uiHighlight,o.font="bold 12px monospace",o.fillText("START",c,d-5)),e.selectedUI==="pad"&&l){l.style.display="block",l.style.left=Math.min(450,Math.max(0,c+8*r+10))+"px",l.style.top=Math.min(500,Math.max(0,d))+"px";const p=document.getElementById("btn_spawn_pad");p&&(p.style.background=t.spawnPoint==="pad"?g.uiHighlight:"var(--accent)")}}if(t.carrierX>=0){const c=(t.carrierX-e.panX)*r,d=(t.carrierY-e.panY)*r,p=t.carrierAngle*Math.PI/180;if(o.save(),o.setLineDash([5,5]),o.strokeStyle=g.carrierPath,t.carrierPath==="straight")o.beginPath(),o.moveTo(c,d),o.lineTo(c+Math.cos(p)*1e3,d+Math.sin(p)*1e3),o.stroke();else if(t.carrierPath==="circle"){const s=t.carrierRadius*r,m=p+Math.PI/2,M=c+Math.cos(m)*s,b=d+Math.sin(m)*s;o.beginPath(),o.arc(M,b,s,0,Math.PI*2),o.stroke(),o.fillStyle=g.carrierPath,o.fillRect(M-3,b-3,6,6)}if(o.restore(),o.save(),o.translate(c,d),o.rotate(p),e.selectedUI==="carrier"&&(o.shadowBlur=10,o.shadowColor=g.textLight),o.fillStyle=g.carrierBase,o.fillRect(-6*r,-1.5*r,12*r,3*r),o.fillStyle=g.carrierAccent,o.beginPath(),o.moveTo(6*r,0),o.lineTo(3*r,-1.5*r),o.lineTo(3*r,1.5*r),o.fill(),o.shadowBlur=0,o.translate(0,0),o.rotate(-p),o.fillStyle=g.textDark,o.font="bold 11px monospace",o.fillText(t.carrierSpeed+"kn",-15,4),t.spawnPoint==="carrier"&&(o.fillStyle=g.uiHighlight,o.fillText("START",-15,-15)),o.restore(),e.selectedUI==="carrier"&&i){i.style.display="block",i.style.left=Math.min(420,Math.max(0,c+20))+"px",i.style.top=Math.min(420,Math.max(0,d+20))+"px";const s=document.getElementById("btn_spawn_carrier");s&&(s.style.background=t.spawnPoint==="carrier"?g.uiHighlight:"var(--accent)")}}if(t.lighthouseX>=0){const c=(t.lighthouseX+.5-e.panX)*r,d=(t.lighthouseY+.5-e.panY)*r;o.fillStyle=g.lighthouseBase,o.beginPath(),o.arc(c,d,r*.8,0,Math.PI*2),o.fill(),o.fillStyle=g.lighthouseLight,o.beginPath(),o.arc(c,d,r*.4,0,Math.PI*2),o.fill()}const n=t.windDir*Math.PI/180;e.selectedUI==="wind"&&(o.shadowBlur=10,o.shadowColor=g.windActive),o.fillStyle=g.shadow,o.beginPath(),o.arc(50,50,30,0,Math.PI*2),o.fill(),o.strokeStyle=e.selectedUI==="wind"?g.windActive:g.padStroke,o.stroke(),o.shadowBlur=0,t.windStr>0&&(o.beginPath(),o.moveTo(50,50),o.lineTo(50+Math.cos(n)*25,50+Math.sin(n)*25),o.stroke()),e.selectedUI==="wind"&&a&&(a.style.display="block")},Z=(t,r,l,i,a,n,c,d,p=!1)=>{const s=w();if(!s)return;const m=s.gridSize,M=s.gridSize/2+5,b=r*.9/m,T=l*.9/M,Y=Math.min(b,T)*(p?1:n),L=Y/2,R=Y*.3,x=r/2+(p?0:c),W=l*.1+a+(p?0:d),B=i==="wireframe"?Math.max(1,Math.round(s.gridSize/25)):1,X=(f,v,S)=>({x:x+(f-v)*(Y/2),y:W+(f+v)*(L/2)-S*R});for(let f=0;f<s.gridSize;f+=B)for(let v=0;v<s.gridSize;v+=B){const S=Math.min(f+B,s.gridSize),I=Math.min(v+B,s.gridSize),P=s.terrain[f][v],D=s.terrain[S]?s.terrain[S][v]:P,U=s.terrain[S]&&s.terrain[S][I]?s.terrain[S][I]:P,q=s.terrain[f]&&s.terrain[f][I]?s.terrain[f][I]:P,A=X(f,v,P),N=X(S,v,D),H=X(S,I,U),O=X(f,I,q);t.beginPath(),t.moveTo(A.x,A.y),t.lineTo(N.x,N.y),t.lineTo(H.x,H.y),t.lineTo(O.x,O.y),t.closePath(),i==="filled"?(P<=0?t.fillStyle=s.night?g.waterNight:g.water:t.fillStyle=C(P,s.night),t.fill(),P>0&&(t.strokeStyle=s.night?"rgba(0,0,0,0.4)":"rgba(0,0,0,0.1)",t.stroke())):(t.strokeStyle="rgba(255,100,0,0.4)",t.stroke())}if(s.padX>=0){const f=X(s.padX+4,s.padY+4,s.terrain[s.padX+4]?s.terrain[s.padX+4][s.padY+4]:0);i==="filled"?(t.fillStyle=s.night?g.padNight:g.padStroke,t.fillRect(f.x-10,f.y-5,20,10)):(t.strokeStyle=g.uiHighlight,t.strokeRect(f.x-10,f.y-5,20,10))}if(s.carrierX>=0){const f=s.carrierAngle*Math.PI/180,v=Math.cos(f),S=Math.sin(f),I=X(s.carrierX+6*v-1.5*S,s.carrierY+6*S+1.5*v,.5),P=X(s.carrierX-6*v-1.5*S,s.carrierY-6*S+1.5*v,.5),D=X(s.carrierX-6*v+1.5*S,s.carrierY-6*S-1.5*v,.5),U=X(s.carrierX+6*v+1.5*S,s.carrierY+6*S-1.5*v,.5);t.beginPath(),t.moveTo(I.x,I.y),t.lineTo(P.x,P.y),t.lineTo(D.x,D.y),t.lineTo(U.x,U.y),t.closePath(),i==="filled"?(t.fillStyle=s.night?g.carrierNight:g.carrierBase,t.fill()):(t.strokeStyle=g.uiHighlight,t.stroke())}},z=()=>{const t=w();y.clearRect(0,0,500,600),t&&(t.night||t.rain)&&(y.fillStyle=t.night?g.bgNight:g.bgRain,y.fillRect(0,0,500,600)),y.save(),y.beginPath(),y.rect(0,0,500,300),y.clip(),Z(y,500,300,"filled",0,e.prevZoom,e.prevPanX,e.prevPanY),y.restore(),y.strokeStyle="#444",y.beginPath(),y.moveTo(0,300),y.lineTo(500,300),y.stroke(),y.save(),y.beginPath(),y.rect(0,300,500,300),y.clip(),Z(y,500,300,"wireframe",300,1,0,0,!0),y.restore()},j=t=>{const r=[];t.forEach(n=>n.forEach(c=>r.push(Math.round(c*10))));const l=[];let i=1,a=r[0];for(let n=1;n<r.length;n++)r[n]===a?i++:(l.push(i>1?`${a}x${i}`:a),a=r[n],i=1);return l.push(i>1?`${a}x${i}`:a),l.join(",")},Q=(t,r)=>{const l=[];t.split(",").forEach(n=>{if(n.includes("x")){const[c,d]=n.split("x");for(let p=0;p<parseInt(d,10);p++)l.push(parseInt(c,10)/10)}else l.push(parseInt(n,10)/10)});const i=[];let a=0;for(let n=0;n<=r;n++){i[n]=[];for(let c=0;c<=r;c++)i[n][c]=l[a++]}return i},u=t=>document.getElementById(t),h=t=>u(t),ee=()=>{const t=w();t&&(t.headline=h("m_headline").value,t.briefing=u("m_briefing").value,t.goalPersons=parseInt(h("m_persons").value)||0,t.goalCrates=parseInt(h("m_crates").value)||0,t.rain=h("m_rain").checked,t.night=h("m_night").checked,t.windDir=parseInt(h("m_wind_dir").value)||0,t.windStr=parseFloat(h("m_wind_str").value)||0,t.windVar=h("m_wind_var").checked,t.carrierPath=u("m_carrier_path").value,t.carrierSpeed=parseFloat(h("m_carrier_speed").value)||0,t.carrierRadius=parseFloat(h("m_carrier_radius").value)||40,t.carrierAngle=parseInt(h("m_carrier_angle").value)||0,t.gridSize=parseInt(h("m_grid_size").value)||100,J(),_(),z())},k=t=>{e.curIdx=t;const r=w();r&&(h("m_headline").value=r.headline,u("m_briefing").value=r.briefing||"",h("m_grid_size").value=r.gridSize.toString(),h("m_persons").value=r.goalPersons.toString(),h("m_crates").value=r.goalCrates.toString(),h("m_rain").checked=r.rain,h("m_night").checked=r.night,h("m_wind_dir").value=r.windDir.toString(),h("m_wind_str").value=r.windStr.toString(),h("m_wind_var").checked=r.windVar,u("m_carrier_path").value=r.carrierPath,h("m_carrier_speed").value=r.carrierSpeed.toString(),h("m_carrier_radius").value=r.carrierRadius.toString(),h("m_carrier_angle").value=r.carrierAngle.toString(),e.selectedUI=null,J(),_(),z())},J=()=>{const t=u("mission-list");t.innerHTML="",e.campaign.forEach((r,l)=>{const i=document.createElement("div");i.className="mission-item"+(l===e.curIdx?" active":"");const a=document.createElement("span");a.innerText=`${l+1}. ${r.headline.substring(0,18)}`;const n=document.createElement("div");n.className="m-controls";const c=document.createElement("button");c.innerText="‚Üë",c.onclick=s=>{s.stopPropagation(),K(l,-1)};const d=document.createElement("button");d.innerText="‚Üì",d.onclick=s=>{s.stopPropagation(),K(l,1)};const p=document.createElement("button");p.innerText="X",p.style.background="#822",p.onclick=s=>{s.stopPropagation(),te(l)},n.append(c,d,p),i.append(a,n),i.onclick=()=>k(l),t.appendChild(i)})},K=(t,r)=>{if(t+r<0||t+r>=e.campaign.length)return;const l=e.campaign[t];e.campaign[t]=e.campaign[t+r],e.campaign[t+r]=l,k(t+r)},te=t=>{e.campaign.length<=1||confirm("Mission wirklich l√∂schen?")&&(e.campaign.splice(t,1),k(Math.max(0,t-1)))},E=()=>{const t=w();if(!t)return;const r=600/t.gridSize*e.zoom,l=600/r,i=600/r;e.panX=Math.max(0,Math.min(e.panX,t.gridSize-l)),e.panY=Math.max(0,Math.min(e.panY,t.gridSize-i)),l>=t.gridSize&&(e.panX=0),i>=t.gridSize&&(e.panY=0)},F=t=>{const r=w();if(!r)return;const i=u("editorCanvas").getBoundingClientRect(),a=600/r.gridSize*e.zoom,n=Math.floor((t.clientX-i.left)/a+e.panX),c=Math.floor((t.clientY-i.top)/a+e.panY);if(!(n<0||n>=r.gridSize||c<0||c>=r.gridSize)){if(e.currentTool==="terrain"){const d=Math.ceil(e.brushRadius),p=t.shiftKey?-1:10,s=.05;for(let m=-d;m<=d;m++)for(let M=-d;M<=d;M++){const b=Math.hypot(m,M),T=n+m,Y=c+M;if(b<=e.brushRadius&&r.terrain[T]&&r.terrain[T][Y]!==void 0){const L=(Math.cos(b/e.brushRadius*Math.PI)+1)/2,R=r.terrain[T][Y];let x=R+(p-R)*s*L;x=Math.max(-1,Math.min(15,x)),r.terrain[T][Y]=Math.round(x*100)/100}}}else if(e.currentTool==="flatten"){const d=t.shiftKey?-1:.25,p=Math.ceil(e.brushRadius);for(let s=-p;s<=p;s++)for(let m=-p;m<=p;m++)Math.hypot(s,m)<=e.brushRadius&&r.terrain[n+s]&&(r.terrain[n+s][c+m]=d)}else e.currentTool==="pad"?t.shiftKey?(r.padX=-1,r.padY=-1):(r.padX=n,r.padY=c):e.currentTool==="carrier"?t.shiftKey?(r.carrierX=-1,r.carrierY=-1):(r.carrierX=n,r.carrierY=c):e.currentTool==="lighthouse"&&(t.shiftKey?(r.lighthouseX=-1,r.lighthouseY=-1):(r.lighthouseX=n,r.lighthouseY=c));_()}},re=()=>{u("btn-add-mission").onclick=()=>{e.campaign.push($()),k(e.campaign.length-1)},u("btn-copy-mission").onclick=()=>{const i=JSON.parse(JSON.stringify(w()));i.headline+=" (Kopie)",e.campaign.push(i),k(e.campaign.length-1)},document.querySelectorAll('input[name="tool"]').forEach(i=>{i.onchange=a=>{e.currentTool=a.target.value,u("editorCanvas").style.cursor=e.currentTool==="move"?"grab":"crosshair"}}),document.querySelectorAll('input[name="brush"]').forEach(i=>{i.onchange=a=>{const n=a.target.value;n==="custom"?(e.isCustomBrush=!0,e.brushRadius=parseFloat(h("m_custom_brush").value)||8):(e.isCustomBrush=!1,e.brushRadius=parseFloat(n))}}),h("m_custom_brush").oninput=()=>{e.isCustomBrush&&(e.brushRadius=parseFloat(h("m_custom_brush").value)||8)},u("btn-zoom-in").onclick=()=>{e.zoom=Math.min(15,e.zoom+.5),E(),_()},u("btn-zoom-out").onclick=()=>{e.zoom=Math.max(1,e.zoom-.5),E(),_()},u("btn-resize-map").onclick=()=>{const i=w();if(!i)return;const a=parseInt(h("m_grid_size").value),n=i.terrain;i.terrain=Array.from({length:a+1},(c,d)=>Array.from({length:a+1},(p,s)=>d<=i.gridSize&&s<=i.gridSize?n[d][s]:-1)),i.gridSize=a,E(),_(),z()},u("close-wind").onclick=()=>{e.selectedUI=null,_()},u("close-carrier").onclick=()=>{e.selectedUI=null,_()},u("close-pad").onclick=()=>{e.selectedUI=null,_()},u("btn_spawn_pad").onclick=()=>{w().spawnPoint="pad",_()},u("btn_spawn_carrier").onclick=()=>{w().spawnPoint="carrier",_()},["m_headline","m_briefing","m_persons","m_crates","m_rain","m_night","m_wind_dir","m_wind_str","m_wind_var","m_carrier_path","m_carrier_speed","m_carrier_radius","m_carrier_angle"].forEach(i=>u(i).addEventListener("input",ee));const r=u("editorCanvas");r.onmousedown=i=>{const a=r.getBoundingClientRect(),n=w(),c=600/n.gridSize*e.zoom,d=i.clientX-a.left,p=i.clientY-a.top,s=d/c+e.panX,m=p/c+e.panY;if(Math.hypot(d-50,p-50)<30){e.selectedUI=e.selectedUI==="wind"?null:"wind",_();return}if(n.padX>=0&&s>=n.padX&&s<=n.padX+8&&m>=n.padY&&m<=n.padY+8&&!i.shiftKey){e.selectedUI=e.selectedUI==="pad"?null:"pad",_();return}if(n.carrierX>=0&&Math.hypot(s-n.carrierX,m-n.carrierY)<6&&!i.shiftKey){e.selectedUI=e.selectedUI==="carrier"?null:"carrier",_();return}e.selectedUI=null,_(),e.currentTool==="move"?(e.isEditorDragging=!0,e.lastMX=i.clientX,e.lastMY=i.clientY,r.style.cursor="grabbing"):(e.isDrawing=!0,F(i))},window.addEventListener("mousemove",i=>{if(e.isEditorDragging){const a=600/w().gridSize*e.zoom;e.panX-=(i.clientX-e.lastMX)/a,e.panY-=(i.clientY-e.lastMY)/a,e.lastMX=i.clientX,e.lastMY=i.clientY,E(),_()}else e.isDrawing&&F(i)}),window.addEventListener("mouseup",()=>{e.isDrawing&&(e.isDrawing=!1,z()),e.isEditorDragging&&(e.isEditorDragging=!1,e.currentTool==="move"&&(r.style.cursor="grab"))}),r.onwheel=i=>{i.preventDefault();const a=r.getBoundingClientRect(),n=w(),c=600/n.gridSize*e.zoom,d=i.clientX-a.left,p=i.clientY-a.top,s=d/c+e.panX,m=p/c+e.panY,M=e.zoom;if(e.zoom=Math.max(1,Math.min(e.zoom+(i.deltaY<0?.5:-.5),15)),e.zoom!==M){const b=600/n.gridSize*e.zoom;e.panX=s-d/b,e.panY=m-p/b,E(),_()}};const l=u("previewCanvas");l.onmousedown=i=>{e.isPrevDragging=!0,e.lastMX=i.clientX,e.lastMY=i.clientY},window.addEventListener("mouseup",()=>{e.isPrevDragging=!1}),window.addEventListener("mousemove",i=>{e.isPrevDragging&&(e.prevPanX+=i.clientX-e.lastMX,e.prevPanY+=i.clientY-e.lastMY,e.lastMX=i.clientX,e.lastMY=i.clientY,z())}),l.ondblclick=()=>{e.prevZoom=1,e.prevPanX=0,e.prevPanY=0,z()},l.onwheel=i=>{i.preventDefault();const a=l.getBoundingClientRect(),n=i.clientX-a.left,c=i.clientY-a.top;if(c>300)return;const d=e.prevZoom;if(e.prevZoom=Math.max(1,Math.min(e.prevZoom*(i.deltaY<0?1.2:.83),20)),e.prevZoom===1)e.prevPanX=0,e.prevPanY=0;else{const p=e.prevZoom/d;e.prevPanX=n-250-(n-(250+e.prevPanX))*p,e.prevPanY=c-30-(c-(30+e.prevPanY))*p}z()},u("btn-export-campaign").onclick=()=>{const i=e.campaign.map(n=>({...n,terrain:j(n.terrain)})),a={type:e.type||"ZEEWOLF_CAMPAIGN",campaignTitle:h("c_title").value,campaignSublines:u("c_sublines").value.split(`
`).filter(n=>n.trim()!==""),levels:i};u("output").value=JSON.stringify(a),alert("Kampagne bereit! (Clean & Lightweight)")},u("btn-import-campaign").onclick=()=>{const i=u("output").value;if(i)try{const a=JSON.parse(i);h("c_title").value=a.campaignTitle||"Imported Campaign",u("c_sublines").value=(a.campaignSublines||[]).join(`
`),e.type=a.type,e.campaign=a.levels.map(n=>({...n,terrain:Q(n.terrain,n.gridSize)})),k(0)}catch(a){alert(`Import Fehler!

`+a)}}},ie=()=>{re(),k(0)};ie();

</script>
      <style>
:root{--accent: #5f5;--bg: #181818;--sidebar-w: 280px}body{background:var(--bg);color:#fff;font-family:monospace;display:flex;flex-direction:row;height:100vh;margin:0;overflow:hidden}#sidebar{width:var(--sidebar-w);background:#111;border-right:2px solid var(--accent);display:flex;flex-direction:column;padding:15px;box-sizing:border-box;box-shadow:5px 0 15px #00000080;z-index:20}.sidebar-header{border-bottom:1px solid #444;padding-bottom:10px;margin-bottom:15px;color:var(--accent);font-size:18px}#mission-list{flex-grow:1;overflow-y:auto;margin-bottom:15px;border:1px solid #333;padding:5px;background:#0a0a0a}.mission-item{padding:10px;background:#222;border:1px solid #444;margin-bottom:8px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;font-size:12px;transition:all .2s}.mission-item.active{border-color:var(--accent);background:#1a331a;box-shadow:0 0 10px #5fff5f33}.mission-item:hover{background:#333;border-color:#888}.m-controls button{padding:4px 6px;font-size:10px;cursor:pointer;background:#444;color:#fff;border:none;margin-left:2px}.m-controls button:hover{background:var(--accent);color:#000}#main-content{flex-grow:1;display:flex;flex-direction:column;align-items:center;overflow-y:auto;padding:20px;background:#1c1c1c}h2{margin:0 0 15px;color:#f60;text-shadow:0 0 10px #ff6600;text-transform:uppercase;letter-spacing:2px}.workspace{display:flex;gap:20px;justify-content:center;align-items:flex-start}.canvas-container{display:flex;flex-direction:column;align-items:center}.canvas-header{background:#111;color:var(--accent);border:2px solid var(--accent);border-bottom:none;padding:5px 10px;box-sizing:border-box;font-weight:700;font-size:12px;display:flex;justify-content:space-between;align-items:center}.header-2d{width:604px}.header-3d{width:504px}.canvas-hint{font-size:10px;color:#aaa;font-weight:400}.editor-wrapper{position:relative;width:600px;height:600px;overflow:hidden;border:2px solid var(--accent);background:#024;box-shadow:0 0 20px #00000080}canvas{display:block;image-rendering:pixelated}#previewCanvas{border:2px solid var(--accent);background:#012;cursor:grab}#previewCanvas:active{cursor:grabbing}.floating-ui{position:absolute;background:#0a0a0af2;border:1px solid var(--accent);padding:12px;font-size:12px;color:#fff;border-radius:4px;z-index:100;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);display:none;box-shadow:0 5px 20px #000c}.floating-ui input,.floating-ui select{background:#000;color:var(--accent);border:1px solid #444;font-family:monospace;margin:2px 0}.close-btn{float:right;cursor:pointer;color:#f55;font-weight:700;font-size:16px;margin-top:-5px}.tool-bar{width:100%;max-width:1128px;box-sizing:border-box;background:#111;border:1px solid var(--accent);padding:15px;margin-bottom:20px}.mission-config{width:100%;max-width:1128px;box-sizing:border-box;background:#111;border:1px solid var(--accent);padding:15px;margin-top:20px}.flex-row{display:flex;gap:20px;margin-top:10px;align-items:flex-start;flex-wrap:wrap}.flex-col{flex:1;min-width:200px}button.primary{background:var(--accent);color:#000;border:none;padding:10px 15px;font-weight:700;cursor:pointer;text-transform:uppercase;width:100%;box-sizing:border-box}button.primary:hover{background:#fff}textarea{width:100%;background:#000;color:var(--accent);border:1px solid #444;padding:8px;font-family:monospace;resize:vertical;box-sizing:border-box}input[type=text],input[type=number]{padding:5px;box-sizing:border-box}label{cursor:pointer;display:inline-block;margin:5px 0}

</style>
    </head>
    <body>
        <div id="sidebar">
            <div class="sidebar-header"><strong>ZEEWOLF OPS</strong></div>
            <div id="mission-list"></div>
            <button class="primary" id="btn-add-mission">‚ûï Mission hinzuf√ºgen</button>
            <button
                id="btn-copy-mission"
                style="
                    margin-top: 8px;
                    background: #555;
                    color: #fff;
                    border: none;
                    padding: 8px;
                    cursor: pointer;
                    width: 100%;
                    box-sizing: border-box;
                "
            >
                üìã Level duplizieren
            </button>

            <hr style="width: 100%; border-color: #333; margin: 20px 0" />

            <div style="font-size: 12px; color: var(--accent); margin-bottom: 10px; font-weight: bold">
                KAMPAGNEN INFO (HAUPTMEN√ú)
            </div>
            <label style="font-size: 10px; color: #aaa">Titel:</label>
            <input
                type="text"
                id="c_title"
                value="OPERATION ZEEWOLF"
                style="width: 100%; margin-bottom: 10px; background: #000; color: var(--accent); border: 1px solid #444"
            />
            <label style="font-size: 10px; color: #aaa">Sublines (1 pro Zeile):</label>
            <textarea id="c_sublines" style="height: 50px; margin-bottom: 15px">
Sichere den Archipel.
Viel Gl√ºck, Pilot.</textarea
            >

            <button
                id="btn-export-campaign"
                style="
                    background: #ff6600;
                    color: #000;
                    border: none;
                    padding: 10px;
                    font-weight: bold;
                    cursor: pointer;
                    width: 100%;
                    box-sizing: border-box;
                "
            >
                ‚¨ÜÔ∏è EXPORT CAMPAIGN
            </button>
            <button
                id="btn-import-campaign"
                style="
                    margin-top: 8px;
                    background: #0088ff;
                    color: #fff;
                    border: none;
                    padding: 10px;
                    font-weight: bold;
                    cursor: pointer;
                    width: 100%;
                    box-sizing: border-box;
                "
            >
                ‚¨áÔ∏è IMPORT DATA
            </button>
            <textarea id="output" placeholder="JSON Code hier einf√ºgen..."></textarea>
        </div>

        <div id="main-content">
            <h2>Mission Builder & Tactical Editor</h2>

            <div class="tool-bar">
                <div class="flex-row" style="margin-top: 0">
                    <div class="flex-col">
                        <strong>TOOLS:</strong><br />
                        <label><input type="radio" name="tool" value="move" /> ‚úã Drag & Pan</label><br />
                        <label><input type="radio" name="tool" value="terrain" checked /> ‚õ∞Ô∏è Berge (Shift: Tal)</label
                        ><br />
                        <label><input type="radio" name="tool" value="flatten" /> üßΩ Einebnen (Shift: Wasser)</label
                        ><br />
                        <label><input type="radio" name="tool" value="pad" /> üöÅ Landepad</label><br />
                        <label><input type="radio" name="tool" value="lighthouse" /> üóº Turm</label><br />
                        <label><input type="radio" name="tool" value="carrier" /> üö¢ Tr√§ger (Shift: L√∂sch)</label>
                    </div>
                    <div class="flex-col" style="border-left: 1px solid #333; padding-left: 15px">
                        <strong>BRUSH RADIUS:</strong><br />
                        <label><input type="radio" name="brush" value="0" /> 1 (Pixel)</label><br />
                        <label><input type="radio" name="brush" value="1.5" checked /> 3 (Normal)</label><br />
                        <label><input type="radio" name="brush" value="5.0" /> 10 (Gro√ü)</label><br />
                        <label><input type="radio" name="brush" value="15.0" /> 30 (Massiv)</label><br />
                        <label
                            ><input type="radio" name="brush" value="custom" /> Frei:
                            <input type="number" id="m_custom_brush" value="8" min="1" max="50" style="width: 45px" />
                        </label>
                    </div>
                    <div class="flex-col" style="border-left: 1px solid #333; padding-left: 15px">
                        <strong>MAP PROPERTIES:</strong><br />
                        Size:
                        <input
                            type="number"
                            id="m_grid_size"
                            value="100"
                            step="10"
                            min="40"
                            max="400"
                            style="width: 60px"
                        />
                        <button id="btn-resize-map" style="padding: 4px 8px; font-size: 11px">Resize</button
                        ><br /><br />
                        Zoom: <button id="btn-zoom-in" style="padding: 4px 8px; font-size: 11px">+</button>
                        <button id="btn-zoom-out" style="padding: 4px 8px; font-size: 11px">-</button><br />
                        <span style="font-size: 10px; color: #666">(Mausrad funktioniert ebenfalls)</span>
                    </div>
                </div>
            </div>

            <div class="workspace">
                <div class="canvas-container">
                    <div class="canvas-header header-2d">
                        <span>2D Editor & Tactical Map</span>
                        <span class="canvas-hint">Klick auf Pad/Tr√§ger/Wind f√ºr Details</span>
                    </div>
                    <div class="editor-wrapper">
                        <canvas id="editorCanvas" width="600" height="600"></canvas>

                        <div id="ui_wind" class="floating-ui" style="left: 90px; top: 15px">
                            <span class="close-btn" id="close-wind">‚úñ</span>
                            <strong style="color: cyan">üí® WIND VECTOR</strong><br />
                            Direction:
                            <input
                                type="number"
                                id="m_wind_dir"
                                value="45"
                                min="0"
                                max="359"
                                style="width: 50px"
                            /><br />
                            Force: &nbsp;&nbsp;&nbsp;&nbsp;<input
                                type="number"
                                id="m_wind_str"
                                value="1.0"
                                step="0.1"
                                min="0"
                                style="width: 50px"
                            /><br />
                            <label><input type="checkbox" id="m_wind_var" /> Dynamic Variance</label>
                        </div>

                        <div id="ui_carrier" class="floating-ui">
                            <span class="close-btn" id="close-carrier">‚úñ</span>
                            <strong style="color: #88aaff">üö¢ CARRIER OPS</strong><br />
                            <button id="btn_spawn_carrier" style="width: 100%; margin: 5px 0">Set Start Point</button
                            ><br />
                            Angle (¬∞):
                            <input
                                type="number"
                                id="m_carrier_angle"
                                value="0"
                                min="0"
                                max="359"
                                style="width: 45px"
                            /><br />
                            Speed (kn):<input
                                type="number"
                                id="m_carrier_speed"
                                value="0"
                                step="0.5"
                                style="width: 45px"
                            /><br />
                            Path:
                            <select id="m_carrier_path" style="width: 80px">
                                <option value="static">Static</option>
                                <option value="straight">Straight</option>
                                <option value="circle">Circle</option></select
                            ><br />
                            Radius:
                            <input type="number" id="m_carrier_radius" value="40" step="5" style="width: 45px" />
                        </div>

                        <div id="ui_pad" class="floating-ui">
                            <span class="close-btn" id="close-pad">‚úñ</span>
                            <strong style="color: #5f5">üöÅ BASE PAD</strong><br />
                            <button id="btn_spawn_pad" style="width: 100%; margin: 5px 0">Set Start Point</button>
                        </div>
                    </div>
                </div>

                <div class="canvas-container">
                    <div class="canvas-header header-3d">
                        <span>3D Engine Preview</span>
                        <span class="canvas-hint">Drag = Pan | D-Klick = Reset</span>
                    </div>
                    <canvas id="previewCanvas" width="500" height="600"></canvas>
                </div>
            </div>

            <div class="mission-config">
                <div class="flex-row">
                    <div class="flex-col" style="flex: 2">
                        <strong>MISSION BRIEFING (In-Game Overlay):</strong><br />
                        Mission Name: <input type="text" id="m_headline" value="Phase 1" style="width: 90%" /><br />
                        Briefing Text:<br />
                        <textarea
                            id="m_briefing"
                            style="height: 60px"
                            placeholder="Text, der vor dem Abflug im Spiel angezeigt wird..."
                        ></textarea>
                    </div>
                    <div class="flex-col">
                        <strong>OBJECTIVES:</strong><br />
                        Personnel: <input type="number" id="m_persons" value="5" min="0" style="width: 60px" /><br />
                        Cargo: &nbsp;&nbsp;&nbsp;&nbsp;<input
                            type="number"
                            id="m_crates"
                            value="0"
                            min="0"
                            style="width: 60px"
                        />
                        <hr style="border-color: #222" />
                        <strong>ENVIRONMENT:</strong><br />
                        <label><input type="checkbox" id="m_rain" /> üåßÔ∏è Rain / Storm</label><br />
                        <label><input type="checkbox" id="m_night" /> üåô Night Ops</label>
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
